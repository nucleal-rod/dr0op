
    /*!
    * image2D - üçá ‰ΩøÁî®ECMAScriptÁªòÂà∂‰∫åÁª¥ÂõæÁâá„ÄÇDrawing Two-Dimensional Pictures Using ECMAScript.
    * git+https://github.com/yelloxing/image2D.git
    *
    * author ÂøÉÂè∂
    *
    * version 0.0.2-dev
    *
    * build Thu Apr 11 2019
    *
    * Copyright yelloxing
    * Released under the MIT license
    *
    * Date:Mon Apr 29 2019 15:23:24 GMT+0800 (GMT+08:00)
    */

"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){"use strict";var m=function t(e){return e&&(e.nodeType===1||e.nodeType===9||e.nodeType===11)};var a=function t(e){return e&&e.nodeType===3};var f=function t(e,r){for(var n in r){try{e[n]=r[n]}catch(t){throw new Error("Illegal property valueÔºÅ")}}return e};var u={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var y={whitespace:"[\\x20\\t\\r\\n\\f]",blank:"[\\n\\f\\r]",identifier:"(?:\\\\.|[\\w-]|[^\0-\\xa0])+"};var l=["href","title","show","type","role","actuate"];var c=function t(e,r){if("innerHTML"in SVGElement.prototype===false||"innerHTML"in SVGSVGElement.prototype===false){var n=document.createElement("div");n.innerHTML=r;var o=function t(e){var r=document.createElementNS(u.svg,e.tagName.toLowerCase());var n=e.attributes,i=void 0;for(i=0;n&&i<n.length;i++){if(l.indexOf(n[i].nodeName)>=0){r.setAttributeNS(u.xlink,"xlink:"+n[i].nodeName,e.getAttribute(n[i].nodeName))}else{r.setAttribute(n[i].nodeName,e.getAttribute(n[i].nodeName))}}return r};var i=o(n.firstChild);(function t(e,r){var n=e.firstChild;if(a(n)){r.textContent=e.innerText;return}while(n){var i=o(n);r.appendChild(i);if(n.firstChild)t(n,i);n=n.nextSibling}})(n.firstChild,i);e.appendChild(i)}else{e.innerHTML=r}};var r=function t(e,r){var n=void 0,i=void 0;if(r==="HTML"){n=document.createElement("div");n.innerHTML=e}else{n=document.createElementNS(u.svg,"svg");c(n,e)}i=n.childNodes;for(var o=0;o<i.length;o++){if(m(i[o]))return i[o]}};function x(t){if(new RegExp("^"+y.identifier+"$").test(t))t="<"+t+"></"+t+">";var e=r(t,"SVG");if(!e||/[A-Z]/.test(e.tagName)||e.tagName==="canvas"){e=r(t,"HTML")}return e}function o(t,e){if(typeof t==="string"){t=t.trim().replace(new RegExp(y.blank,"g"),"");if(/^</.test(t)){var r=x(t);if(m(r))return[r];else return[]}else if(t==="*"){return e.getElementsByTagName("*")}var n=t.match(new RegExp("#"+y.identifier,"g"));if(n){var i=document.getElementById(n[0].replace("#",""));if(m(i))return[i];else return[]}var o=t.match(new RegExp("\\."+y.identifier,"g")),a=t.match(new RegExp("^"+y.identifier));if(a||o){var f=e.getElementsByTagName(a?a[0]:"*"),u=[];for(var l=0;l<f.length;l++){var c=" "+f[l].getAttribute("class")+" ",s=true;for(var d=0;o&&d<o.length;d++){if(!c.match(" "+o[d].replace(".","")+" ")){s=false;break}}if(s)u.push(f[l])}return u}else{throw new Error("Unsupported selector:"+t)}}else if(m(t)){return[t]}else if(t&&(t.constructor===Array||t.constructor===HTMLCollection||t.constructor===NodeList)){var h=[];for(var v=0;v<t.length;v++){if(m(t[v]))h.push(t[v])}return h}else if(t&&t.constructor===_){return t}else if(typeof t==="function"){var p=e.getElementsByTagName("*"),g=[];for(var w=0;w<p.length;w++){if(t(p[w]))g.push(p[w])}return g}else{throw new Error("Unknown selector:"+t)}}var _=function t(e,r){return new t.prototype.init(e,r)};_.prototype.init=function(t,e){this.context=e=e||document;var r=o(t,e),n=void 0;for(n=0;n<r.length;n++){this[n]=r[n]}this.length=r.length;return this};_.prototype.extend=_.extend=function(){var t=arguments[0]||{};var e=arguments[1]||{};var r=arguments.length;if(r===1){e=t;t=this}if((typeof t==="undefined"?"undefined":_typeof(t))!=="object"&&typeof t!=="function"){t={}}for(var n in e){try{t[n]=e[n]}catch(t){throw new Error("Illegal property valueÔºÅ")}}return t};_.prototype.init.prototype=_.prototype;function t(){var u={},l=void 0,n=void 0;var i=function t(){var a=[],f=0,u=0;(function t(e,r){if(r>u)u=r;var n=void 0;for(n=0;n<e.children.length;n++){t(l[e.children[n]],r+1)}l[e.id].left=r+.5;if(n==0){if(a[r]==undefined)a[r]=-.5;if(a[r-1]==undefined)a[r-1]=-.5;l[e.id].top=a[r]+1;var i=a[r]+1+(l[e.pid].children.length-1)*.5;if(i-1<a[r-1])l[e.id].top=a[r-1]+1-(l[e.pid].children.length-1)*.5}else{l[e.id].top=(l[e.children[0]].top+l[e.children[n-1]].top)*.5}if(l[e.id].top<=a[r]){var o=a[r]+1-l[e.id].top;(function t(e,r){l[e].top+=o;if(a[r]<l[e].top)a[r]=l[e].top;var n=void 0;for(n=0;n<l[e].children.length;n++){t(l[e].children[n],r+1)}})(e.id,r)}a[r]=l[e.id].top;if(l[e.id].top+.5>f)f=l[e.id].top+.5})(l[n],0);return{node:l,root:n,size:f,deep:u+1}};var o=function t(o){var a={};var e=u.root(o),f=void 0,r=void 0;f=r=u.id(e);a[f]={data:e,pid:null,id:f,children:[]};(function t(e,r){var n=u.child(e,o),i=void 0;for(i=0;n&&i<n.length;i++){f=u.id(n[i]);a[r].children.push(f);a[f]={data:n[i],pid:r,id:f,children:[]};t(n[i],f)}})(e,f);return[r,a]};var e=function t(e){var r=o(e);l=r[1];n=r[0];return i()};e.root=function(t){u.root=t;return e};e.child=function(t){u.child=t;return e};e.id=function(t){u.id=t;return e};return e}function e(n){n=f({begin:0,deg:Math.PI*2},n);var i=t().root(n.root).child(n.child).id(n.id);var e=function t(e){var r=i(e);if(n.t==="LR"||n.t==="RL");else if(n.t==="TB"||n.t==="BT");else if(n.t==="circle");n.drawer(r);return t};e.drawer=function(t){n.drawer=t;return e};return e}function n(){}function s(t,e,r,n){n=n||0;var i=Math.sqrt(e*e+r*r+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,e*t/i,r*t/i,n*t/i,1]}function d(t){var e=Math.sin(t),r=Math.cos(t);return[r,e,0,0,-e,r,0,0,0,0,1,0,0,0,0,1]}function h(t,e,r,n,i,o){n=n||0;i=i||0;o=o||0;return[t,0,0,0,0,e,0,0,0,0,r,0,n-n*t,i-i*e,o-o*r,1]}function v(t,e,r,n,i,o){if(typeof t==="number"&&typeof e==="number"){if(typeof r!=="number"){r=0;n=t;i=e;o=1}else if(typeof n!=="number"||typeof i!=="number"||typeof o!=="number"){n=t;i=e;o=r;t=0;e=0;r=0}if(t==n&&e==i&&r==o)throw new Error("It's not a legitimate ray!");var a=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)),f=a!=0?(i-e)/a:1,u=a!=0?(n-t)/a:0,l=(n-t)*u+(i-e)*f,c=o-r,s=Math.sqrt(l*l+c*c),d=s!=0?c/s:1,h=s!=0?l/s:0;return[[f,d*u,u*h,0,-u,f*d,f*h,0,0,-h,d,0,e*u-t*f,r*h-t*u*d-e*f*d,-t*u*h-e*f*h-r*d,1],[f,-u,0,0,d*u,d*f,-h,0,u*h,f*h,d,0,t,e,r,1]]}else{throw new Error("a1 and b1 is required!")}}var p=function t(e,r){var n=[];for(var i=0;i<4;i++){for(var o=0;o<r.length/4;o++){n[o*4+i]=e[i]*r[o*4]+e[i+4]*r[o*4+1]+e[i+8]*r[o*4+2]+e[i+12]*r[o*4+3]}}return n};function i(t){var l=t||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var c={move:function t(e,r,n,i){l=p(s(e,r,n,i),l);return c},rotate:function t(e,r,n,i,o,a,f){var u=v(r,n,i,o,a,f);l=p(p(p(u[1],d(e)),u[0]),l);return c},scale:function t(e,r,n,i,o,a){l=p(h(e,r,n,i,o,a),l);return c},multiply:function t(e,r){l=r?p(l,e):p(e,l);return c},use:function t(e,r,n,i){n=n||0;i=i||1;var o=p(l,[e,r,n,i]);o[0]=+o[0].toFixed(7);o[1]=+o[1].toFixed(7);o[2]=+o[2].toFixed(7);o[3]=+o[3].toFixed(7);return o},value:function t(){return l}};return c}var g=[];var w=13;var b=400;var T=null;function E(e,t,r){var u={timer:function t(e,r,n){if(!e){throw new Error("Tick is required!")}r=r||b;var i=(new Date).valueOf()+"_"+(Math.random()*1e3).toFixed(0);g.push({id:i,createTime:new Date,tick:e,duration:r,callback:n});u.start();return i},start:function t(){if(!T){T=window.setInterval(u.tick,w)}},tick:function t(){var e=void 0,r=void 0,t=void 0,n=void 0,i=void 0,o=void 0,a=void 0,f=g;g=[];g.length=0;for(r=0;r<f.length;r++){i=f[r];e=i.createTime;t=i.tick;o=i.duration;n=i.callback;a=(+new Date-e)/o;a=a>1?1:a;t(a);if(a<1&&i.id){g.push(i)}else if(n){n(a)}}if(g.length<=0){u.stop()}},stop:function t(){if(T){window.clearInterval(T);T=null}}};var n=u.timer(function(t){e(t)},t,r);return function(){var t=void 0;for(t in g){if(g[t].id==n){g[t].id=undefined;return}}}}function k(t,e){var r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle;return typeof e==="string"?r.getPropertyValue(e):r}function N(t){}function M(u){u=f({u:.5},u);var l=void 0,c=void 0,s=void 0;var d=function t(e){if(l){var r=(e-c)/(s-c),n=r*r,i=r*n;var o=i*l[0]+n*l[1]+r*l[2]+l[3];return o*(s-c)}else throw new Error("You shoud first set the position!")};d.setP=function(t,e,r,n,i,o){if(t<r){c=t;s=r;var a=u.u*i,f=u.u*o;e/=r-t;n/=r-t;l=[2*e-2*n+a+f,3*n-3*e-2*a-f,a,e]}else throw new Error("The point x-position should be increamented!");return d};return d}function S(i){i=f({t:0},i);var o=void 0,r=void 0;var a=function t(e){if(o){r=-1;while(r+1<o.x.length&&(e>o.x[r+1]||r==-1&&e>=o.x[r+1])){r+=1}if(r==-1||r>=o.h.length)throw new Error("Coordinate crossing!");return o.h[r](e)}else{throw new Error("You shoud first set the position!")}};a.setT=function(t){if(typeof t==="number"){i.t=t}else{throw new Error("Expecting a figure!")}return a};a.setP=function(t){o={x:[],h:[]};var e=void 0,r=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),n=void 0;o.x[0]=t[0][0];for(e=1;e<t.length;e++){if(t[e][0]<=t[e-1][0])throw new Error("The point position should be increamented!");o.x[e]=t[e][0];n=e<t.length-1?(t[e+1][1]-t[e-1][1])/(t[e+1][0]-t[e-1][0]):(t[e][1]-t[e-1][1])/(t[e][0]-t[e-1][0]);o.h[e-1]=M({u:(1-i.t)*.5}).setP(t[e-1][0],t[e-1][1],t[e][0],t[e][1],r,n);r=n}return a};return a}var C=function t(e,r,n,i,o){var a=Math.cos(n),f=Math.sin(n);return[+((i-e)*a-(o-r)*f+e).toFixed(7),+((i-e)*f+(o-r)*a+r).toFixed(7)]};var A=function t(e,r,n,i,o){var a=Math.sqrt(e*e+r*r);return[+(e*n/a+i).toFixed(7),+(r*n/a+o).toFixed(7)]};var L=function t(e,r,n,i,o){return[+(n*(i-e)+e).toFixed(7),+(n*(o-r)+r).toFixed(7)]};var P=function t(o){o=f({d:[1,1],c:[0,0],p:[0,0]},o);var a={rotate:function t(e){var r=o.d[0]+o.p[0],n=o.d[1]+o.p[1];var i=C(o.p[0],o.p[1],e,r,n);o.d=[i[0]-o.p[0],i[1]-o.p[1]];return a},move:function t(e){o.p=A(o.d[0],o.d[1],e,o.p[0],o.p[1]);return a},scale:function t(e){o.p=L(o.c[0],o.c[1],e,o.p[0],o.p[1]);return a},value:function t(){return o.p}};return a};function I(){}var B=function t(e,r){var n=o(e,r||document);if(n.length>0){for(var i=0;i<this.length;i++){n[0].appendChild(this[i])}}else{throw new Error("Target empty!")}return this};var O=function t(e,r){var n=o(e,r||document);if(n.length>0){for(var i=0;i<this.length;i++){n[0].insertBefore(this[i],n[0].childNodes[0])}}else{throw new Error("Target empty!")}return this};var F=function t(e,r){var n=o(e,r||document);if(n.length>0){for(var i=0;i<this.length;i++){n[0].parentNode.insertBefore(this[i],n[0].nextSibling)}}else{throw new Error("Target empty!")}return this};var R=function t(e,r){var n=o(e,r||document);if(n.length>0){for(var i=0;i<this.length;i++){n[0].parentNode.insertBefore(this[i],n[0])}}else{throw new Error("Target empty!")}return this};var z=function t(){for(var e=0;e<this.length;e++){this[e].parentNode.removeChild(this[e])}return this};var D=function t(e){var r=[];for(var n=0;n<this.length;n++){if(e(n,_(this[n])))r.push(this[n])}return _(r)};function $(){if(arguments.length<=1&&(arguments.length<=0||_typeof(arguments[0])!=="object")){if(this.length<=0)throw new Error("Target empty!");return k(this[0],arguments[0])}for(var t=0;t<this.length;t++){if(arguments.length===1){for(var e in arguments[0]){this[t].style[e]=arguments[0][e]}}else this[t].style[arguments[0]]=arguments[1]}return this}var H=function t(e,r,n){if(/[a-z]/.test(e.tagName)&&l.indexOf(r)>=0){e.setAttributeNS(u.xlink,"xlink:"+r,n)}else e.setAttribute(r,n)};function V(){if(arguments.length===1&&_typeof(arguments[0])!=="object"){if(this.length<=0)throw new Error("Target empty!");return this[0].getAttribute(arguments[0])}else if(arguments.length>0){for(var t=0;t<this.length;t++){if(arguments.length===1){for(var e in arguments[0]){H(this[t],e,arguments[0][e])}}else H(this[t],arguments[0],arguments[1])}}return this}var j=function t(e,r){if(arguments.length<=0){if(this.length<=0)throw new Error("Target empty!");return this[0].__data__}for(var n=0;n<this.length;n++){this[n].__data__=typeof r==="function"?r(e,n):e}return this};var q=function t(e,r){if(arguments.length<=0){var n=[];for(var i=0;i<this.length;i++){n[i]=this[i].__data__}return n}var o=[],a=void 0;for(a=0;a<this.length&&a<e.length;a++){this[a].__data__=typeof r==="function"?r(e[a],a):e[a];o.push(this[a])}var f=_(o);f.__enter__=[];for(;a<e.length;a++){f.__enter__.push(typeof r==="function"?r(e[a],a):e[a])}f.__exit__=[];for(;a<this.length;a++){f.__exit__.push(this[a])}return f};var G=function t(e){if(!this.__enter__||this.__enter__.constructor!==Array)throw new Error("Not a data node object to be balanced!");var r=[];for(var n=0;n<this.__enter__.length;n++){r[n]=x(e);r[n].__data__=this.__enter__[n]}delete this.__enter__;return _(r)};var U=function t(){if(!this.__exit__||this.__exit__.constructor!==Array)throw new Error("Not a data node object to be balanced!");var e=_(this.__exit__);delete this.__exit__;return e};var W=function t(e){for(var r=0;r<this.length;r++){e(this[r].__data__,r,_(this[r]))}return this};var X=function t(e,r){if(window.attachEvent){for(var n=0;n<this.length;n++){this[n].attachEvent("on"+e,r)}}else{for(var i=0;i<this.length;i++){this[i].addEventListener(e,r,false)}}return this};var Y=function t(e){var r=this[0].getBoundingClientRect();if(!e||!e.clientX)throw new Error("Event is necessary!");return{x:e.clientX-r.left,y:e.clientY-r.top}};function Z(t,e,r,n,i,o,a){if(e>Math.PI*2)e=Math.PI*2;if(e<-Math.PI*2)e=-Math.PI*2;if(e<0){t+=e;e*=-1}var f=[],u=void 0;u=C(0,0,t,i,0);f[0]=u[0];f[1]=u[1];u=C(0,0,e,u[0],u[1]);f[2]=u[0];f[3]=u[1];u=C(0,0,t,o,0);f[4]=u[0];f[5]=u[1];u=C(0,0,e,u[0],u[1]);f[6]=u[0];f[7]=u[1];a(t,t+e,f[0]+r,f[1]+n,f[4]+r,f[5]+n,f[2]+r,f[3]+n,f[6]+r,f[7]+n,(o-i)*.5)}var J=function t(e,r){e.font=r["font-size"]+"px "+r["font-family"];return e};var K=function t(s,d,h,v,p,g,e,r){Z(e,r,h,v,p,g,function(t,e,r,n,i,o,a,f,u,l,c){if(c<0)c=-c;s.beginPath();s.moveTo(r,n);s.arc(h,v,p,t,e,false);if(d["arc-end-cap"]!="round")s.lineTo(u,l);else s.arc((a+u)*.5,(f+l)*.5,c,e-Math.PI,e,true);s.arc(h,v,g,e,t,true);if(d["arc-start-cap"]!="round")s.lineTo(r,n);else s.arc((r+i)*.5,(n+o)*.5,c,t,t-Math.PI,true)});return s};var Q=function t(e,r,n,i){e.beginPath();e.moveTo(r+i,n);e.arc(r,n,i,0,Math.PI*2);return e};function tt(t){var c=t.getContext("2d");var f={"font-size":"16","font-family":"sans-serif","arc-start-cap":"butt","arc-end-cap":"butt"};var s={config:function t(){if(arguments.length===1){if(_typeof(arguments[0])!=="object")return c[arguments[0]];for(var e in arguments[0]){if(f[e])f[e]=arguments[0][e];else c[e]=arguments[0][e]}}else if(arguments.length===2){if(f[arguments[0]])f[arguments[0]]=arguments[1];else c[arguments[0]]=arguments[1]}return s},fillText:function t(e,r,n){J(c,f).fillText(e,r,n);return s},strokeText:function t(e,r,n){J(c,f).strokeText(e,r,n);return s},beginPath:function t(){c.beginPath();return s},closePath:function t(){c.closePath();return s},moveTo:function t(e,r){c.moveTo(e,r);return s},lineTo:function t(e,r){c.lineTo(e,r);return s},fill:function t(){c.fill();return s},stroke:function t(){c.stroke();return s},toDataURL:function t(){return c.toDataURL()},drawImage:function t(e,r,n,i,o,a,f,u,l){c.drawImage(e,r,n,i,o,a,f,u,l);return s},fillArc:function t(e,r,n,i,o,a){K(c,f,e,r,n,i,o,a).fill();return s},strokeArc:function t(e,r,n,i,o,a){K(c,f,e,r,n,i,o,a).stroke();return s},fillCircle:function t(e,r,n){Q(c,e,r,n).fill();return s},strokeCircle:function t(e,r,n){Q(c,e,r,n).stroke();return s}};return s}var et=function t(){var e=window.navigator.userAgent;if(e.indexOf("Opera")>-1||e.indexOf("OPR")>-1)return"Opera";if(e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1)return"IE";if(e.indexOf("Edge")>-1)return"Edge";if(e.indexOf("Firefox")>-1)return"Firefox";if(e.indexOf("Chrome")>-1)return"Chrome";if(e.indexOf("Safari")>-1)return"Safari";return"unknown"};var rt={type:et};function nt(t,e){var r=rt.type();if(t==="textAlign"){return{left:"start",right:"end",center:"middle"}[e]||e}else if(t==="textBaseline"){return{top:"text-before-edge",bottom:{Safari:"auto"}[r]||"ideographic"}[e]||{Firefox:"middle"}[r]||"central"}return e}var it=function t(e,r,n,i){if(!m(e[0]))throw new Error("Target empty!");if(e[0].nodeName.toLowerCase()!=="text")throw new Error("Need a <text> !");var o=rt.type();if(o==="IE"||o==="Edge"){if(r.textBaseline==="text-before-edge")i+=r["font-size"];else if(r.textBaseline==="central")i+=r["font-size"]*.5}return e.css({"text-anchor":r.textAlign,"dominant-baseline":r.textBaseline,"font-size":r["font-size"]+"px","font-family":r["font-family"]}).attr({x:n,y:i})};var ot=function t(h,v,e,r,p,g,n,i){if(h[0].nodeName.toLowerCase()!=="path")throw new Error("Need a <path> !");Z(n,i,e,r,p,g,function(t,e,r,n,i,o,a,f,u,l,c){var s=e-t>Math.PI?1:0,d="M"+r+" "+n;if(c<0)c=-c;d+="A"+p+" "+p+" 0 "+s+" 1 "+a+" "+f;if(v["arc-end-cap"]!="round")d+="L"+u+" "+l;else d+="A"+c+" "+c+" "+" 0 1 0 "+u+" "+l;d+="A"+g+" "+g+" 0 "+s+" 0 "+i+" "+o;if(v["arc-start-cap"]!="round")d+="L"+r+" "+n;else d+="A"+c+" "+c+" "+" 0 1 0 "+r+" "+n;h.attr("d",d)});return h};var at=function t(e,r,n,i){if(e[0].nodeName.toLowerCase()!=="circle")throw new Error("Need a <circle> !");e.attr({cx:r,cy:n,r:i});return e};function ft(r,t){var f=void 0;if(t)f=_(t,r);var u={fillStyle:"#000",strokeStyle:"#000",lineWidth:1,textAlign:"start",textBaseline:nt("textBaseline","middle"),"font-size":"16","font-family":"sans-serif","arc-start-cap":"butt","arc-end-cap":"butt"};var l={config:function t(){if(arguments.length===1){if(_typeof(arguments[0])!=="object")return u[arguments[0]];for(var e in arguments[0]){u[e]=nt(e,arguments[0][e])}}else if(arguments.length===2)u[arguments[0]]=nt(arguments[0],arguments[1]);return l},bind:function t(e){f=_(e,r);return l},appendTo:function t(e){f.appendTo(e,r);return l},prependTo:function t(e){f.prependTo(e,r);return l},afterTo:function t(e){f.afterTo(e,r);return l},beforeTo:function t(e){f.beforeTo(e,r);return l},fillText:function t(e,r,n){it(f,u,r,n).attr("fill",u.fillStyle)[0].textContent=e;return l},strokeText:function t(e,r,n){it(f,u,r,n).attr({stroke:u.strokeStyle,fill:"none"})[0].textContent=e;return l},fillArc:function t(e,r,n,i,o,a){ot(f,u,e,r,n,i,o,a).attr("fill",u.fillStyle);return l},strokeArc:function t(e,r,n,i,o,a){ot(f,u,e,r,n,i,o,a).attr({"stroke-width":u.lineWidth,stroke:u.strokeStyle,fill:"none"});return l},fillCircle:function t(e,r,n){at(f,e,r,n).attr("fill",u.fillStyle);return l},strokeCircle:function t(e,r,n){at(f,e,r,n).attr({"stroke-width":u.lineWidth,stroke:u.strokeStyle,fill:"none"});return l}};return l}function ut(){if(!m(this[0]))throw new Error("Target empty!");var t=this[0],e=t.nodeName.toLowerCase();if(e==="canvas")return tt(t);if(e==="svg")return ft(t,arguments[0]);throw new Error("Painter is not a function!")}_.extend({treeLayout:e,pieLayout:n,Matrix4:i,rotate:C,move:A,scale:L,dot:P,animation:E,color:N,cardinal:S,track:I});_.prototype.extend({appendTo:B,prependTo:O,afterTo:F,beforeTo:R,remove:z,filter:D,css:$,attr:V,datum:j,data:q,enter:G,exit:U,loop:W,bind:X,position:Y,painter:ut});var lt=window.image2D,ct=window.$$;_.noConflict=function(t){if(window.$$===_){window.$$=ct}if(t&&window.image2D===_){window.image2D=lt}return _};window.image2D=window.$$=_})();